webpackJsonp([15],{JmxM:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("gyMJ"),l=o("js5j"),r=o("SdV4"),i={components:{pagination:l.a},data:function(){return{form:{},tableData:[],maturities:r.a,page:{pageSize:10,pageNum:1,total:0},deptList:{},groupList:{},loading:!1,multipleSelection:[],list:[],flag:!0,userList:[],gruopList2:[],memberList:[]}},mounted:function(){this.getDeptList(),this.getUserList(),this.getGroupList(),this.bindData()},methods:{getUserList:function(){var t=this;Object(a.B)().then(function(e){t.userList=e})},getGroup:function(t){var e=this;this.form.shopGroupId=null,this.form.shopUserId2&&(this.form.shopUserId2=null),this.gruopList2=[],this.memberList=[],t&&this.groupList.map(function(o){o.groupDeptId==t&&e.gruopList2.push(o)})},getMember:function(t,e){var o=this;this.form.shopUserId2&&(this.form.shopUserId2=null),this.memberList=[],t&&e&&Object(a.w)(t,e).then(function(t){o.memberList=t})},getDeptList:function(){var t=this;Object(a.q)().then(function(e){t.deptList=e})},getGroupList:function(){var t=this;Object(a.u)().then(function(e){t.groupList=e})},submitReport:function(t){console.log(t),this.$router.push({path:"/customer/cooperationDetail",name:"cooperationDetail",params:t})},handleSelectionChange:function(t){this.multipleSelection=t},followRecord:function(t){console.log(t),this.$router.push({path:"/customer/followRecord",query:{id:t.id}})},addCustomer:function(){this.$router.push({path:"/customer/add"})},nav2ShopDetail:function(t){this.$router.push({path:"/shopDetail",query:{id:t}})},nav2Update:function(t){this.$router.push({path:"update",query:{id:t}})},del:function(t){var e=this;this.$confirm("是否删除【"+t.shopName+"】?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.delete(t.id)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},delete:function(t){var e=this;Object(a.k)(t).then(function(t){t.success?e.$sucmsg("删除成功"):e.$errmsg("删除失败"),e.bindData()})},reset:function(){this.form={},this.bindData()},bindData:function(){var t=this,e=this.form,o=this.page.pageNum,l=this.page.pageSize;this.loading=!0,e.privateType="1",Object(a.y)(e,o,l).then(function(e){t.tableData=e.rows,console.log(e.rows),e.rows.forEach(function(e,o){t.groupList.forEach(function(t){e.shopDeptId==t.groupDeptId&&e.shopGroupId==t.groupId&&(e.group=t.groupName)}),t.userList.forEach(function(t){e.shopUserId2==t.id&&(e.creater=t.username)}),t.deptList.forEach(function(t){e.shopDeptId==t.deptId&&(e.dep=t.deptName)})}),t.tableData=e.rows,t.page.total=e.total,t.loading=!1}).catch(function(){t.loading=!1})},transTo:function(){var t=this;if(this.multipleSelection[0]){for(var e=0;e<this.multipleSelection.length;e++)this.multipleSelection[e].privateType=0,this.multipleSelection[e].shopGroupId="",this.multipleSelection[e].shopDeptId="",this.multipleSelection[e].shopUserId="",Object(a.H)(this.multipleSelection[e]).then(function(e){if(e.success);else{t.$errmsg(e.message)}});this.$sucmsg("修改成功"),this.bindData()}else this.$message("请选择店铺")}},watch:{tableData:function(t){this.tableData=t},deep:!0}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-row",{staticClass:"form_row"},[o("el-form",{ref:"form",attrs:{inline:"",size:"mini",model:t.form}},[o("el-form-item",{attrs:{prop:"createTime",label:"创建时间:","label-width":"80px"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.createTime,callback:function(e){t.$set(t.form,"createTime",e)},expression:"form.createTime"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"maturity",label:"成熟度:","label-width":"60px"}},[o("el-select",{attrs:{value:"0"},model:{value:t.form.maturity,callback:function(e){t.$set(t.form,"maturity",e)},expression:"form.maturity"}},t._l(t.maturities,function(e,a){return o("el-option",{key:a,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),t._v(" "),o("el-form-item",{attrs:{prop:"shopName",label:"店铺名称:","label-width":"80px"}},[o("el-input",{model:{value:t.form.shopName,callback:function(e){t.$set(t.form,"shopName",e)},expression:"form.shopName"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"wangwangaccount",label:"旺旺号:","label-width":"80px"}},[o("el-input",{model:{value:t.form.wangwangaccount,callback:function(e){t.$set(t.form,"wangwangaccount",e)},expression:"form.wangwangaccount"}})],1),t._v(" "),o("br"),t._v(" "),o("el-form-item",{attrs:{prop:"ID",label:"合作产品ID:","label-width":"100px"}},[o("el-input",{attrs:{value:t.form.ID}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"beginPrice",label:"回款金额区间查询:","label-width":"130px"}},[o("el-input",{attrs:{value:t.form.beginPrice,type:"number"}})],1),t._v(" "),o("span",{staticStyle:{"font-size":"14px",color:"#666",position:"relative",top:"3px",left:"-2px"}},[t._v("到")]),t._v(" "),o("el-form-item",{attrs:{prop:"endPrice"}},[o("el-input",{attrs:{value:t.form.endPrice,type:"number"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"部门:","label-width":"60px"}},[o("div",[o("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.getGroup(t.form.shopDeptId)}},model:{value:t.form.shopDeptId,callback:function(e){t.$set(t.form,"shopDeptId",e)},expression:"form.shopDeptId"}},[o("el-option",{attrs:{value:"",label:"全部"}}),t._v(" "),t._l(t.deptList,function(t,e){return o("el-option",{key:e,attrs:{value:t.deptId,label:t.deptName}})})],2)],1)]),t._v(" "),o("el-form-item",{attrs:{label:"组别:","label-width":"60px"}},[o("div",[o("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.getMember(t.form.shopDeptId,t.form.shopGroupId)}},model:{value:t.form.shopGroupId,callback:function(e){t.$set(t.form,"shopGroupId",e)},expression:"form.shopGroupId"}},[o("el-option",{attrs:{value:"",label:"全部"}}),t._v(" "),t._l(t.gruopList2,function(t,e){return o("el-option",{key:e,attrs:{value:t.groupId,label:t.groupName}})})],2)],1)]),t._v(" "),o("el-form-item",{attrs:{label:"部门人员:","label-width":"80px"}},[o("div",[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.shopUserId2,callback:function(e){t.$set(t.form,"shopUserId2",e)},expression:"form.shopUserId2"}},[o("el-option",{attrs:{value:"",label:"全部"}}),t._v(" "),t._l(t.memberList,function(t,e){return o("el-option",{key:e,attrs:{value:t.id,label:t.username}})})],2)],1)]),t._v(" "),o("br")],1),t._v(" "),o("el-row",[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.bindData}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{type:"default",size:"mini"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),o("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addCustomer}},[t._v("新建")]),t._v(" "),o("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("导入")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("模板下载")]),t._v(" "),o("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.transTo}},[t._v("转入公海")])],1)],1),t._v(" "),o("el-row",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{size:"mini","header-cell-style":{textAlign:"center",background:"#eee"},"cell-style":{textAlign:"center"},data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection"}}),t._v(" "),o("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"dep",label:"所属小组"}}),t._v(" "),o("el-table-column",{attrs:{prop:"creater",label:"所属人员"}}),t._v(" "),o("el-table-column",{attrs:{prop:"group",label:"所属部门"}}),t._v(" "),o("el-table-column",{attrs:{label:"店铺名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"shopName",on:{click:function(o){return t.nav2ShopDetail(e.row.id)}}},[t._v(t._s(e.row.shopName))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"wangwangaccount",label:"旺旺账号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"maturity",label:"成熟度"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"运营QQ"}}),t._v(" "),o("el-table-column",{attrs:{prop:"nextTime",label:"跟进时间"}}),t._v(" "),o("el-table-column",{attrs:{prop:"followUpRecord",label:"跟进记录"}}),t._v(" "),o("el-table-column",{attrs:{prop:"refundsTime",label:"回款时间"}}),t._v(" "),o("el-table-column",{attrs:{prop:"refundsMoney",label:"回款金额"}}),t._v(" "),o("el-table-column",{attrs:{prop:"shopType",label:"店铺类型"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"运营名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"shopOperatePhone",label:"运营电话"}}),t._v(" "),o("el-table-column",{attrs:{prop:"dataType",label:"资料类型"}}),t._v(" "),o("el-table-column",{attrs:{prop:"operatorUserId",label:"操作人"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"打标类型"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"320px"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"operates"},[o("el-row",[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return t.submitReport(e.row)}}},[t._v("提报")]),t._v(" "),o("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(o){return t.nav2Update(e.row.id)}}},[t._v("修改")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return t.followRecord(e.row)}}},[t._v("跟进记录")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){return t.del(e.row)}}},[t._v("删除")])],1)],1)]}}])})],1),t._v(" "),o("pagination",{staticClass:"pagination",attrs:{page:t.page},on:{change:t.bindData}})],1)],1)},staticRenderFns:[]};var s=o("C7Lr")(i,n,!1,function(t){o("b3D7")},"data-v-5dff4c52",null);e.default=s.exports},b3D7:function(t,e){}});
//# sourceMappingURL=15.e3b48862e68a994c3333.js.map
webpackJsonp([19],{EE7o:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("js5j"),a=s("gyMJ"),o=s("BvhE"),n={components:{Page:r.a},data:function(){return{showPassword:!1,showUserTypeTransform:!1,loading:!1,user:"",page:{pageSize:10,pageNum:1,total:10},form:{},op:{realname:"like",phone:"like"},orderBy:"create_time",userTypeList:[{label:"全部员工",value:""},{label:"新员工",value:0},{label:"老员工",value:1}],userList:[],deptList:[],groupList:[]}},methods:{getDeptList:function(){var e=this;Object(a.q)().then(function(t){e.deptList=t})},getgroupList:function(){var e=this;Object(a.u)().then(function(t){e.groupList=t})},getUserList:function(){var e=this,t={};t.sysUser=this.form,t.pageNum=this.page.pageNum,t.pageSize=this.page.pageSize,this.loading=!0,Object(a.C)(this.form,this.page.pageNum,this.page.pageSize).then(function(t){t.rows.forEach(function(t,s){e.groupList.forEach(function(e){t.deptId==e.groupDeptId&&t.groupId==e.groupId&&(t.groupName=e.groupName)})}),e.userList=t.rows;for(var s=0;s<e.userList.length;s++)e.userList[s].deptId=e.deptList[e.userList[s].deptId].deptName;console.log(e.userList),e.page.total=t.total,e.loading=!1}).catch(function(){e.loading=!1})},getPassword:function(e){this.showPassword=!0,e.password=o.Base64.decode(e.password),this.user=e},reset:function(){this.form={},this.getUserList()},resetPassword:function(e){e.password=o.Base64.encode(e.password)},transformUserType:function(e){var t=this;this.$confirm("此操作将改变员工状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1===e.type?e.type=0:e.type=1,Object(a.G)(e).then(function(e){t.getUserList()}),t.$message({type:"success",message:"改变成功!"})}).catch(function(){t.$message({type:"info",message:"已取消"})})},logoutUser:function(e){var t=this;this.$confirm("此操作将改变员工状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1===e.isDelete?e.isDelete=0:e.isDelete=1,Object(a.G)(e).then(function(e){t.getUserList()}),t.$message({type:"success",message:"改变员工状态成功!"})}).catch(function(){t.$message({type:"info",message:"已取消"})})},createUser:function(){this.$router.push({path:"addUser"})},updUserById:function(e){this.$router.push({path:"updUser",query:{id:e}})}},created:function(){this.getUserList(),this.getDeptList(),this.getgroupList()}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-form",{attrs:{"label-width":"100px",inline:"",size:"mini"}},[s("el-form-item",{attrs:{label:"用户登录名:"}},[s("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"真实姓名:"}},[s("el-input",{model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname",t)},expression:"form.realname"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所属部门:"}},[s("el-input",{model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所属部门:"}},[s("el-input",{model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"用户权限:"}},[s("el-input",{model:{value:e.form.userRole,callback:function(t){e.$set(e.form,"userRole",t)},expression:"form.userRole"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号码:"}},[s("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"员工类型:"}},[s("el-select",{attrs:{clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.userTypeList,function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.getUserList}},[e._v("查询")]),e._v(" "),s("el-button",{on:{click:e.reset}},[e._v("重置")]),e._v(" "),s("el-button",{attrs:{type:"warning"},on:{click:e.createUser}},[e._v("新建")])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.userList,"header-cell-style":{textAlign:"center",background:"#eee"},"cell-style":{textAlign:"center"},size:"mini"}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),s("el-table-column",{attrs:{label:"登录账号",prop:"username"}}),e._v(" "),s("el-table-column",{attrs:{label:"真实姓名",prop:"realname"}}),e._v(" "),s("el-table-column",{attrs:{label:"所属单位",prop:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n       "+e._s(t.row.groupName)+"\n      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户权限",prop:"userRole"}}),e._v(" "),s("el-table-column",{attrs:{label:"手机号码",prop:"phone"}}),e._v(" "),s("el-table-column",{attrs:{label:"是否新人"},scopedSlots:e._u([{key:"default",fn:function(t){return[""===t.row.type?s("el-tag",{attrs:{type:"primary","disable-transitions":""}},[e._v("全部员工")]):e._e(),e._v(" "),"0"===t.row.type?s("el-tag",{attrs:{type:"primary","disable-transitions":""}},[e._v("新员工")]):e._e(),e._v(" "),"1"===t.row.type?s("el-tag",{attrs:{type:"warning","disable-transitions":""}},[e._v("老员工")]):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"查看密码"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"linkSpan",on:{click:function(s){return e.getPassword(t.row)}}},[s("el-tag",{attrs:{type:"success"}},[e._v("查看")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"新人转换"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",size:"mini",disabled:"1"===t.row.type},on:{click:function(s){return e.transformUserType(t.row)}}},[e._v("转换")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"修改"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(s){return e.updUserById(t.row.id)}}},[e._v("修改")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"注销"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isDelete?s("span",{staticClass:"linkSpan",on:{click:function(s){return e.logoutUser(t.row)}}},[s("el-tag",[e._v("已激活")])],1):e._e(),e._v(" "),1===t.row.isDelete?s("span",{staticClass:"linkSpan",on:{click:function(s){return e.logoutUser(t.row)}}},[s("el-tag",{attrs:{type:"danger"}},[e._v("已注销")])],1):e._e()]}}])})],1),e._v(" "),s("Page",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{page:e.page},on:{change:e.getUserList}}),e._v(" "),s("el-dialog",{attrs:{title:"提示",visible:e.showPassword,width:"30%"},on:{"update:visible":function(t){e.showPassword=t},closed:function(t){return e.resetPassword(e.user)}}},[s("el-form",{attrs:{"label-width":"80px",model:e.user}},[s("el-form-item",{attrs:{label:"用户姓名"}},[s("el-input",{attrs:{disabled:!0},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"真实姓名"}},[s("el-input",{attrs:{disabled:!0},model:{value:e.user.realname,callback:function(t){e.$set(e.user,"realname",t)},expression:"user.realname"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{disabled:!0},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showPassword=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=s("C7Lr")(n,l,!1,function(e){s("zEjN")},"data-v-27991730",null);t.default=i.exports},zEjN:function(e,t){}});
//# sourceMappingURL=19.3b5ca672e297cf1eb823.js.map
webpackJsonp([29],{"3+HQ":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("js5j"),o=l("gyMJ"),r={components:{Page:a.a},mounted:function(){this.getUserList(),this.getGroupList(),this.getDeptList(),this.bindData()},data:function(){return{form:{},page:{pageSize:10,pageNum:1,total:10},page1:{pageSize:5,pageNum:1,total:0},loading:!1,statusOptions:[{label:"全部",value:"name"},{label:"待确认",value:"name"},{label:"已确认",value:"name"},{label:"已修改",value:"name"},{label:"退回申请",value:"name"}],orderByOptions:[{label:"全部",value:" "},{label:"由高到低",value:"2"},{label:"由低到高",value:"1"}],checkingTableData:[{name:"name",id:1}],otherRecordsTableData:[{name:"name",id:1}],otherRecordsVisiable:!1,deptList:[],groupList:[],userList:[],PRE_URL:o.a}},methods:{getUserList:function(){var e=this;Object(o.N)().then(function(t){e.userList=t})},getDeptList:function(){var e=this;Object(o.y)().then(function(t){e.deptList=t})},getGroupList:function(){var e=this;Object(o.E)().then(function(t){e.groupList=t})},showOtherRecords:function(e,t){var l=this;Object(o.B)(e).then(function(e){e[0]&&(e.forEach(function(e,a){e.goodsEndtime=l.getMyDate(e.goodsEndtime),e.goodsStarttime=l.getMyDate(e.goodsStarttime),e.goodsShopName=t,l.groupList.forEach(function(t){e.goodsGroupId==t.groupId&&e.goodsDeptId==t.groupDeptId&&(e.goodsGroupId=t.groupName)}),l.userList.forEach(function(t){e.goodsUserId==t.id&&(e.goodsUserId=t.username)}),l.deptList.forEach(function(t){e.goodsDeptId==t.deptId&&(e.goodsDeptId=t.deptName)})}),l.otherRecordsTableData=e,console.log(e))}),this.otherRecordsVisiable=!0},bindData:function(){var e=this,t=this.page.pageNum,l=this.page.pageSize,a=this.form;this.loading=!0,Object(o.w)(a,t,l).then(function(t){t.rows.forEach(function(t,l){t.cmApplyTime=e.getMyDate(t.cmApplyTime),t.cmBackTime=e.getMyDate(t.cmBackTime),e.groupList.forEach(function(e){t.cmSellDept==e.groupId&&t.cmDept==e.groupDeptId&&(t.cmSellDept=e.groupName)}),e.userList.forEach(function(e){t.cmUserId==e.id&&(t.cmUserId=e.username)}),e.deptList.forEach(function(e){t.cmDept==e.deptId&&(t.cmDept=e.deptName)})}),console.log(t),e.checkingTableData=t.rows,e.page.total=t.total,e.loading=!1}).catch(function(){e.loading=!1})},getMyDate:function(e){var t=new Date(e),l=t.getFullYear(),a=t.getMonth()+1,o=t.getDate(),r=t.getHours(),n=t.getMinutes();return n<10&&(n="0"+n),l+"-"+a+"-"+o+" "+r+":"+n}}},n={render:function(){var e=this,t=this,l=t.$createElement,a=t._self._c||l;return a("div",[a("div",{staticClass:"title"},[t._v("查款管理")]),t._v(" "),a("el-form",{attrs:{inline:"",size:"mini","label-position":"left","label-width":"120px;"}},[a("el-form-item",{attrs:{label:"店铺名称："}},[a("el-input",{model:{value:t.form.cmShopName,callback:function(e){t.$set(t.form,"cmShopName",e)},expression:"form.cmShopName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优惠券名称："}},[a("el-input",{model:{value:t.form.cmYhqName,callback:function(e){t.$set(t.form,"cmYhqName",e)},expression:"form.cmYhqName"}})],1),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"申请时间："}},[a("el-date-picker",{attrs:{type:"date"},model:{value:t.form.cmApplyTimeBegin,callback:function(e){t.$set(t.form,"cmApplyTimeBegin",e)},expression:"form.cmApplyTimeBegin"}})],1),t._v(" "),a("span",{staticStyle:{position:"relative",top:"5px",left:"-2px"}},[t._v("至")]),t._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{type:"date"},model:{value:t.form.cmApplyTimeEnd,callback:function(e){t.$set(t.form,"cmApplyTimeEnd",e)},expression:"form.cmApplyTimeEnd"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"到款时间："}},[a("el-date-picker",{attrs:{type:"date"},model:{value:t.form.cmBackTimeBegin,callback:function(e){t.$set(t.form,"cmBackTimeBegin",e)},expression:"form.cmBackTimeBegin"}})],1),t._v(" "),a("span",{staticStyle:{position:"relative",top:"5px",left:"-2px"}},[t._v("至")]),t._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{type:"date"},model:{value:t.form.cmBackTimeEnd,callback:function(e){t.$set(t.form,"cmBackTimeEnd",e)},expression:"form.cmBackTimeEnd"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.statusOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"服务费金额统计："}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.cmFwPrice,callback:function(e){t.$set(t.form,"cmFwPrice",e)},expression:"form.cmFwPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结算金额排序："}},[a("el-select",{model:{value:t.form.cmJsMoney,callback:function(e){t.$set(t.form,"cmJsMoney",e)},expression:"form.cmJsMoney"}},t._l(t.orderByOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.bindData}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:function(){e.form={},e.bindData()}}},[t._v("重置")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"mini",data:t.checkingTableData}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmSellDept",label:"销售部"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmDept",label:"部门"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmUserId",label:"责任人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmShopName",label:"店铺名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link",on:{click:function(l){return t.showOtherRecords(e.row.cmShopId,e.row.cmShopName)}}},[t._v(t._s(e.row.cmShopName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cmShopType",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmJsMoney",label:"结算金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmFkMoney",label:"返款金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmSyMoney",label:"剩余金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmJsNums",label:"结算量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmFwPrice",label:"服务费单价"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmYhqPhoto",label:"优惠券截图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:t.PRE_URL+"/"+e.row.cmYhqPhoto,"min-width":"70",height:"70"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"打款截图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:t.PRE_URL+"/"+e.row.cmDkPhote,"min-width":"70",height:"70"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cmLoadCustomer",label:"转入账户"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmApplyTime",label:"申请时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmType",label:"查款状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmYhqName",label:"优惠券名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmBackTime",label:"到款时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmText",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cmYhqType",label:"券截图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:t.PRE_URL+"/"+e.row.cmYhqType,"min-width":"70",height:"70"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"再次提交",width:"120px"}},[[a("el-button",{attrs:{size:"mini",type:"success"}},[t._v("再次提交")])]],2)],1),t._v(" "),a("Page",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{page:t.page},on:{change:t.bindData}}),t._v(" "),a("el-dialog",{attrs:{title:"此店铺下同属这笔款的商品记录",width:"80%",visible:t.otherRecordsVisiable},on:{"update:visible":function(e){t.otherRecordsVisiable=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:t.otherRecordsTableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{label:"部门",prop:"goodsDeptId"}}),t._v(" "),a("el-table-column",{attrs:{label:"销售人",prop:"goodsUserId"}}),t._v(" "),a("el-table-column",{attrs:{label:"店铺名称",prop:"goodsShopName"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品ID",prop:"goodsId"}}),t._v(" "),a("el-table-column",{attrs:{label:"优惠券名称",prop:"goodsYhqName"}}),t._v(" "),a("el-table-column",{attrs:{label:"上线时间",prop:"goodsStarttime"}}),t._v(" "),a("el-table-column",{attrs:{label:"下线时间",prop:"goodsEndtime"}}),t._v(" "),a("el-table-column",{attrs:{label:"结算金额",prop:"goodsPayMoney"}}),t._v(" "),a("el-table-column",{attrs:{label:"结算量",prop:"goodsNums"}}),t._v(" "),a("el-table-column",{attrs:{label:"服务费单价",prop:"goodsService"}}),t._v(" "),a("el-table-column",{attrs:{label:"转入账户",prop:"goodszhuanghu"}}),t._v(" "),a("el-table-column",{attrs:{label:"打款日期",prop:"dakuanriqi"}})],1)],1)],1)},staticRenderFns:[]};var i=l("C7Lr")(r,n,!1,function(e){l("ymnL")},"data-v-04a8116c",null);t.default=i.exports},ymnL:function(e,t){}});
//# sourceMappingURL=29.a5d924294a5f6004615e.js.map